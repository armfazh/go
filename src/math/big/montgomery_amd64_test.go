// @author Armando Faz

package big

import (
	"fmt"
	"internal/cpu"
	"math/rand"
	"testing"
	"time"
)

type intmult func([]Word, []Word, []Word)
type montRed func([]Word, []Word, Word) Word
type gen_value func() Word

func testIntMult(t *testing.T, f intmult, sizes []int, value gen_value) {

	for i, x_len := range sizes {
		for j, y_len := range sizes {
			x := nat(nil).make(x_len)
			y := nat(nil).make(y_len)
			for t, _ := range x {
				x[t] = value()
			}
			for t, _ := range y {
				y[t] = value()
			}
			got := nat(nil).make(x_len + y_len)
			f(got, x, y)
			got = got.norm()

			want := nat(nil).mul(x, y)
			if got.cmp(want) != 0 {
				t.Errorf("#(%d,%d) got %s want %s", i, j, got.utoa(16), want.utoa(16))
			}
		}
	}
}

func TestIntMult(t *testing.T) {
	r := rand.New(rand.NewSource(int64(time.Now().UnixNano())))
	values := []gen_value{
		func() Word { return 0 },
		func() Word { return 1 },
		func() Word { return (1 << _W) - 1 },
		func() Word { return Word(r.Uint64()) },
	}

	length := make([]int, 64)
	for i, _ := range length {
		length[i] = i
	}

	for _, value := range values {
		testIntMult(t, intmult_mulq, length, value)
		if cpu.X86.HasBMI2 {
			testIntMult(t, intmult_mulx, length, value)
		}
		//	if cpu.X86.HasADX {
		//		testIntMult_allones(t, intmult_mulx, sizes)
		//	}
	}
}

var setOfPrimes = []string{
	"0xbe033362228c50d6e9a8474e95988295a5060c74836adca9dd3d23c966b3889ef566d214b3a729be483df348f01a27cbd6ebf77866ecd6e1cacd546520873213",
}

/*var setOfPrimes = []string{
	"0xbe033362228c50d6e9a8474e95988295a5060c74836adca9dd3d23c966b3889ef566d214b3a729be483df348f01a27cbd6ebf77866ecd6e1cacd546520873213",
	"0x93831a60c3c5d6ace5ba068dde4e9ea797e7be20f1341bc7ac899d69a061fa06bf18eba1cd4a3b14145d68d77c0cbaa33ad434e666ea323fb3952f422cfd1a5",
	"0x89de96c50f5652d5388a904a127dcf975606185164b59df1b36f3c7cf9e5bccf89e96f92701d3a80e4c3efe6b1c71686f4aab6e8c2ea91cbe1843f951e0f124b",
	"0xaeee57d2552b9721db15f68b76d89539a9a2d90aa0fcd5187538431a0e4ce4e0f67384e4298465f5f625b08d5777534ae67bfb2ffa6ad2bdd9f858f77c9e77b9",
	"0x83309d8b12d74fd2e6ca15b680f85bdeec223d6968872d0b77dd75fccb2ddcb2d507bfbf95ccb8737ca29acaff43d315221df5d51fd2e355c35efaa55c715a9",
	"0x3435118d71583652d55e3d932afdec06467d6462918fa13e79fbfc709a101ed8f75476a699f2b9091e2b812c80a63d6ffc4424785833e83c5c8173aaba91682d",
	"0x833f1c66fafc8113be98087bd23f3cba017d3022ed4a0ae86396b5a6aa7a77ba883bf73ecc2898b9a923f49ad270982bb65243410e7e43a8e272d8631f35004d",
	"0xeae95e226bc4520a79f69eebd4476e4f10d67f131706903239a4d45608631e92853c29485679bb620a651f1b0093dfac122bae531b11aefcbe7a218cf39d6049",
	"0xe1df218813a39eaeefd08eb9886cb3ec3a52cf2b7f9f1dc35cef18b46b507f0ad318f8c233b07694de2f023812106ed93d9b7cae6b6677f890738d05d3a638eb",
	"0xe43d9d5bef6850f3131fb1b950493e41653acc708a27143b7cd727f3d7d291b4abf6f2e34a80d0f74403e8f86f824a4eac87db6992ef18d50a9fc1b466a717bb",
	"0x529052cc055d7726e3beae264d93d7b1243a38936a86e8167c7e6969b7dd8ceb0115ca69beb19e9cef09aff2824c0928bfcd1a016ddb615be9e68630fba8a464792f3bab64feb0356b6d2c3be2f71efc765a161e3c3d0a87dc2b9f59d508d445c5a6f5d19fb04a0da87555eb23c0534ae84b53ccb98d91bd536656429dba0ae9",
	"0xf63c49e60838ee36621ef249efcc6852ad36753982aa7a2d54a860c8fdc2f5951506c05631158945c1ec2226665b04342ba301dee6a976593309cd9a7b55122d2b86b68dffa901f873987f2587bce3fe9595a25814e80e040bc5ab301153475484f180fd9ec4c0aeab4e5f508c050bc310bf2468bb27f4b15e311b87e12b4689",
	"0xf6b548c66edf8c59d2e6a3851706c985853bfd6da7da7fdf33bfe7b3156fa1ae52fff5ee0c3386b6337463cc72124d4dba4d0aed6f9008f324a8df845508e9d2f7c386132de5d5a11c215e57a05df7a33b536df2ffc473ae2e5d4c50d48634b1a4690130e88e3c58ca80b20dfecd468621ff7b5f8d1656dd1e3fa7263e9b50b5",
	"0x8ecddf1adafc6dd48e5379015eebf7484e56dec7ab4e5e69e6d5bb54002c577628dc4a89fd353056d98a417f021368fd284829c75a5cf48d721b3ac97da65ac4af00c15a258ec4408ddec19e055a10f563ad6b9f10d2fbbab94f33c9d001546b636ccb38126e14da609a61b43a0ba20c97f387837d7e06bc1ca6740bd9436e03",
	"0x18cf73f2519889832a0eb5d3af924be6c946d8236ee59c38e1c770d0db9763e37707a8c92f5c4b712cdd40dc2f6dd306bb08a3c67e566fdc3118ce410f1200479feec4fe4eafd6ec5ea2f0e0f43b0026e10cc54d3e477bc4e99c30c91d97c9056c855e490b028cdf937feb729ced6d262d605cc12465b479a2c17c74773a6a5",
	"0x7c6732c26cb73c8e18ea32aa29cf8d0278a77af69630924bb21e79eb059b79d1d5a15be59bd7b65b0f26615b902b1161844b06b1070901fc38a6f34c1669ba388497c2a7957fbc9a9529431289c98cc09a1b80595cb1b2e213bd775c3eb9b1bcb3c6c5a0922faee09d5a7988c75fcc2ce17254cdca4a7b73a4b599ed9ad069d5",
	"0xc2f1a6f9e04c97147a2fd3cc482e933009819e138b33e2a965bb3ab7c6b7e7c8b62b9bb9a1867ce493e220eeb380e4266e2afc58c7a2b6da81b1640e674281ee858945d520299d226c943c9899b7d3242646adaab1533effec5ff9c38f8a0e92569bdf237cc37c25cd6d1e5efe8b06d9fd01eb74dcff9e1cc771a8cfa9a8fe17",
	"0xe7f7b3ce6b93a9ce4aaedf070662973d3e80c1814e8f752c63174eac50ad7b50dda66c194bf5e7749c3b5e7a9d5b844f51e718002644961b91f99ca1e7f3d3f149eb5994193b11bbc91c486fd3f9b7cfc2c4803c414711e7a2d525d969884f5642eac65bd5ab0901543f803e3d2a7aeb7df7b1e50cec3a9374bc439ba0a60d7",
	"0x1be10612ff5142ef727cabb5258fecf19672da365eaed323c97a9c6822ca934a560e940c29a6a612cdb096ea9d62de34ba12f0201e0f3572a18c5f42a73b6b9cb96801f0581cadc34de00ac3ddc3863a74202c6c4cbcb08c69b919d5f4751e0a86cda7b6ef6580ce5ee52a0e865e7c7064e128f687648cf46b16041d27b56001",
	"0x8dc966d88d264614fedfbf092fe0303186b4ab6ee1f2727bbc851d4e6ffccf3b7969ee9335a531ab90de9f170e7dc3aa2feeaa9de7439bb28bf14190f8e013c7475bf4094103da78393a7f1b68c8297466ddfbab8e5154a64d7fc05001d3991398d1999a4dc94ddcd072c11366b4ec54023fac10b45ca5feaa3a900c3c78f15b",
	"0x6bd20f33ffc72befc24e75557edebfd9ae137afc90c6c368e0d6056c8691602cf3eeb7bf52b725fcd97da4287c13d359f12f76d3aa26ca98015f89ae39dedf67d29d4f547e3ef67d3b6f91fe26473efc8fba8f5bdbd583c0edbaf8f192f1a021940dbc9eaf93e49d65b6bfe400d01c5e52b8acf200c3aba310817e0aec29f33421227fa8ffecd7efa89216573ebf0b0da831792bd2c4ac2a8d29a28922125d24f4ce47981338b2100d6f02fcb36515e7afa4e0b02d3521ac62ec9f82e67612c9",
	"0x9116dcf0edc8f8922e67ad4b3f38989d126a9673a757f5b2bdff9fcbc533bbad1e0e008340f2442625ecb2c0b914a177ab6f2598c06d0a63702f40ac1b026c64d9ee224da7acc2deff3254c89c6022634392bee0e99694acf98f8633c8869b534174fdbe9b3c1ca3bc5a653e0a301b8289f55c82569de21478bd16687aa2424859c476449303426a488f57ad4554790e824043ff4bbd8cc0834e086ecaaa157a57ecd3686cc3c2ed05775e11202c9ddcdebacb1520c99bdb325507bf7f071ff9",
	"0xd6e9f77717bcf8cf1e040a97df6f98f389a0cbb6613312fa435ce14fbb683ea388f9b3d759b20bdfb12517d05c0f93dad4cab7e496b7683b1b0bf74b5ce4e0cdee2a4866e6c035e34a8e062defb1a04bd8fb12499ef0e37e862f340ff05452ccc76b214946be406cc7c38bf35f4fd0fc4272bd650e29feb54d18bc5402d6af0d96468264b38c8177523b7b263d521d5bc91b10ae782ed2d9d971a26d9cc4d7ca74421d53aa498a9f470bedf511b7055a6085ba357c4983e7bd45e092ea920781",
	"0xf7a05169d5604a7a6e5027d16c526668d5b69424b57e42c5d12595ed0ba939bcd5bf1502d83fa21f65b09fcff5743e7f1b7524ff4f6d3663aaf8cabd1423df463e050c7a3e332c2e3191dbfa107e6ba3a46e4a53636c1b38e46b2912635711365d5a819cb5a72bc496512f91148662e0106073223a2f64b692c54217436a246145fbf22974323c8f7a4ea53a8b513089c512c92510f8a1dba7690357d0cfbd3a8abd7ef96b6874c3ce08e527353b6c19a80f12b833ddf49e61c41fdfff90f6f7",
	"0xb03ee6223e6a7db6bf3b82cca6b3e3e857223e8a8e283d08f17cea744fef359992ec44ea02064c215c541ce6841ec6a3c1bf7d163e658b155f0cf98181852d89e30e7a5d9a02453fa0beb23c115b47043cef8cdf204219ddc6877db53029e1651fc8e380589844cd9544fba8121b1f51ee6b626611afa0e960a9aa7912770a30418c13302a4f5f63ca54f68d57e698961d4477aac653a7ff0e07ec8d1410acb3aae45a7b1719e454bfa148731869a0856aacc762c3a45b037b3192007c3b6de1",
	"0x9f0d63d7751ef78781f921f47be79464565412a82d81bf5f32e3d4fb14103225765a12943e72733d5f70a7668dce9e5d5348cdb51fd5e54ff549ac44285b6f4ba1111738b041ee68d627d9e01ec5a9194adc5b4cc2ad16b5468d8d8739decf0c63e8acce0fbaf5e2c936ce5a03e18810fdce842fed6b7347b7927da001c5199c7e77673d2a914d80fbc11c4ce9d03b8673c7432893f32b7a3aca0ee4a9747a2063b313a3321923d9bb1dbecbe28b623b9e9e5063a33dfa637a00623a88efd103",
	"0x227bb5abda4ec121030a7e211ea23dc1df7e4eba01d71d3ef6742dae6f7b210ff3c1a1cde26d2085a4107d6ea73dec1b498ae781d39883dcf6272a9c39f35883650f398adf370be97bdc92011cec9b7bcc8b6cb2509ef8598992a394af850807828129050a61f05257558ea90d6502b0861e3716823de674e476abdcc37818a02af0ead78d23ffb65a7f5aea74f2f03f3fa26936d600abeb1085bac2a95225c2308abb584cf5ad9f3c72afb477d65c74753fdb3de10ce8441548c4a5cc807721",
	"0x8a08223b65528502f9f2b06be0f39211d25b6861dd53616b9c1548286eef76837ec32834cfed508b3fd6626dda8221295c606446a8103a0c5d8763355faccfec1c67a73cd7dfc2af2327c8a094c1cd4a929bd0767c639dfcbedb6b0bf6b372574953db0a126bedeb27a824c00b4aff4f5b0bd4a20fe4a28514ed0e8e7624e7e9cddc03aa9f373ced77e4a1ce6b974af0d6d9c4be24f77ae5d83451c772a7ebc89c32963ca012713134651b9249a8537f7b335738b71ab35e1829a00c95953067",
	"0x24e7175c205b85cb38b4373061ee83e5c71f804125e71c306a77f4945dff15a9d17a0980d415b771aded1b204d6b380a97b95a0750c7629e9afc0110b9209add1e2b5798b02bf7a4c4e48d63ff2060a19ca045079e0229954a952e3de47fb304695f06a119f8ea83d171dd8acfd9e8a3c405ddefbe42ecbe63a978b6013150d6790ef7d881f727d8dba7b9dbcc075dc4f7ed8f86b7f89292174503811a3192d34f1ebabfa4c38081033e03d6f11a5dd3262054b45f07f8bd122fc9e963e4ee35",
	"0x56d09da3a8438870952fa784ccae937727b3cad113c4b3bbe3ab59ff264beaf3f75d0541c1b9aefd1e7b20dd451d3e811981531f3b5efe412df7390a5556ef73735fe3b3b3a69f4eb00415fa4d6c11b6a8d6c6a7c0dc9977c2a7f7f2239be2019e352257a4f9ea93dc26d23bd2cff472781b5f9806040bb69bb74b870d31e53ce3f982da92fc63f6ddeec8ca10035272a5ff66adb2da090f9e4af29b8461984c4916907590c0ad628086fba3720a404167b8dd3bd480bfaa3ad54a0b4a418b4f",
	"0xfbf839ce7821fbd92f2b984198eb564f885a50a75b9398e5f73466f8712d321492ef482f013d9c8d132c6e31a8625bb4cfee3a513ed42be6ba95acc68c8969a8ffcdd50737f047dd69f90308f017b5bb3065712635b2652e64ba8fb63543cd03bb533629d42c1c87a0e50c2ef0c6f4a4d6a243c6c15d3f29ff82f9bb96e4df595168d84e52c1829f5033a4e55a5c8aba88bd4dfddcd3ca207d567cc451989d0914cfcc1aa9c56cc974980b16b8665de7b778a046ad03d8f2d4f2cca6bbcffedb480bbdfc353b72870c72a19debfe8be33f51297fcb17626e962f4fcab13a4e07ba62a7f8688195ceaf280b49c645f88a2a94633e850bc604940f877b80b9b925",
	"0xd275998fdf5a944d4a5f3ebf2c42901ed9a5559956d5ad0d5cf9b2fbdc4ad0a233c409d2840e1a325c0b0d1a7a086cca0a61efcfd9e48b5372d8f69336da9e26a4be375c80d5db65329a692a0684fda696efd9eb889b6c587a4ba57c6cdeae021cc30146c4c6630a881e2f675204bcb7072db2cd28216d43394ff1bd741a5be57c2b81a083849d9d657fc80a29e4ff4082083bc9e9321cdfa9cfe9d19675b15f7362cfd9f62ef431be56ead378e29186f5a7531eb84c79e966fb4e86d15652486556556955f4bde80d0a63c5d347f0524ff802d8ebf1f746618a05aa7f2a3f8595e09adcf4294e8f8af21de86d9129f022e6cc303dec22bed0c48ccd6be00529",
	"0x3b1e441f1a447f0cc5c4310c1b5940842e5cd692a1a325356f3b475724301336b70841c73bfc752e7ab563c06dde60d1c3397316792d7072c009726a34ef4b1224ee800697ffc1c7eb72d1fd8d2323fa9a52fd59b905bfc16b39af921b528f525323503e7db92ab611d9694bdcf46cfe76cacc9d56ba77eb62c804d5a597a93001ab1f27ac4ba7e7be091c8a39dadced84cabe63f871840e64433fe6bcec5e95470f20b7b0c3fc729edc08ce0ac365b32c047ff8ae103e69f335861841cea4923ab70a01d30a29f05a6c1970aa6def0010f36c7ceaffe72ce5cedf9174122212cf9daacb4c30b282c7f59434824a80678e0724b9f110d13120432f62ab33e807",
	"0xc8190826433c38261637899388d74c75cebc09de88288221bbaed255a51dfcf66755147c812fac4fe7f2a17cf140f0ff21e8aa63dc98d163d1700cf3da46767404926648b64b752394f61f4d990da28e97ca9c641d8db8be9e29f169edc1f739d39fa31c930002d78a43a808de88f351b18e43e31501e97986c8417f62ac48739151cd92925ebb24a4b168af06625e5461f427c7ed76732da1bb95481e316dd34abeaa2386efb35d0b46b2c3fb73e997dfbf1905b42133caf6aa94e9768e27777088523764e1ce94cd29d4447c1297863209dd3452ddc0702e0d77565dbe3b12ade3ffe84ffc759e22495637b95d9fa7eeb46f2924a7a1218ecb554789e81c75",
	"0xc571d6c9f066a8f89a121210e312d5bbe36c92f0f60ec6e67a7c764b5571ca51abd892f54561fe0f89878673b03e39895645f48990f42035aa934dd28e24bb1b7e83d96bb83d7bbf570717413233633bb6c0049952bae51e002a2759e2b9fea60298ebde22f21c4252f784942e5349435d2a7e9fe3fe8849fcfc35d5a23e1cd0926cedb38ff6975bf2e3d23d082f89122fb1ed06e7f404c85512bbe39f609e1e6c9ad5deb1e7db2ecdda5f986c3a600719b68f0afc73bff32a82af171c75712e3e20bf8401f03afc0783e0055df0d62f5752bf2c1bf68e418b3f84de568e1c9673e6a8e17eaf33be83679b2e07e9cf4cf3d602fe354f2e71b4d5b046369efee1",
	"0x16ff82ffc53f28acfdcdf3cf3ba0b5c656af341943bda8e842d647132149f28944cfb30aa4186c521ce481aa906550188bc14ce4fe8a34daf16e24c39ee5b52020485d8442e93b32ce99db860e776ab91a6eb58961f54fa7351a590f23c7fff12996b9a75ec4f0e823726ffbabb0dbf15c97320aa59b17acbd00cd229f8125b16404414da01c405e9a477cc3488edfa5c31fe01a9b10ea46e8af6e2d11c08fbe02b8085968baaed85f42dbe6755bd9d72c70e302e1a6e10f17e37405d550dd0b73e8ebfda2d4f4393641d3e5ba712495c3eadfebfc5c5fd0f22875f69862bc4362a0bf6f49b926d54521b3645b6d7e8df0f2824345a0910fce1d3c51241402ef",
	"0x6c26ef29c1e6b06225ec8abde1a1fa28d85640de6675d5070fac78eda77e3b00855de0dae9de0d28363d2f509079f0a7df5112e1eabf7e453a66d5d9e3bb5943e3adf702d9171f82ff72501f91dd77bb78dea596c88f557d480d7b99d87485eba3c28ab1da718561fa36d8ce48271b77af4f35cbb9624cdf9438519f1dd8e783b5dfaa645599ed2bb944b4d152a58561842761d0c8cf2ee1ecd28e24ce62aa8c27f8087f78b50af6d24d16ec9ef7225f9c0cadea36b3fc3569ff35eac4092f9064b2661fd7ea07a898da944b52d6820082e3bdbe40fdf0bced036f3dfe6a5f6356789b63df5abace852aa08dd63a2194ca9d9408192da09a3a5add9b0f73f6e1",
	"0xcf574889e335d3c369a5f0adae4951bb36d50b0a0f2d0370fc483df730b3260b0312c4b679ca50f80f7fc6d86d0297401304f13a9127c88a2afe6598e26131eb5f0ce5a544668b183cf1da21a858bd61f8c8bf50becc3d5afca49e6bc226ea163d408b8d4d5bf33e28560e413d822b2b420efe01e2bc66bf207a4db5e0a6c423c99fde851e47e8e5b246fb95f13095afb45d95dedc3fbfbb370fedab80017bb9cc3292e43e29ab384fd5522736ff706a373783cbf9f7f5af9e7a71e2127096ff5438f942caa2df39f1f2578b7c7beddd02c806875add8603dd1869fe8fa1f21294a4d543c615062e6ca3347225e0b32aeef4b92d34c00879edcc878811736255",
	"0xf2dee9b305610ad21684bfd13374cd5a1b106bbbddab4a5929b48506e0d6995a3319cef5991115dea032786cce89b2940c52c84c86d8d1fa0e773b1fa0d9987590faca536c7cb085a75174b6ad86ce76afe4996692748b43b30a75dfb965abad2238e99bf53b8198f9520d0dbeb95f3ec128d1105b7f826224502a9ce813c6541993788288f88d043f1a01d9767500d12476515fd32a0bb69f8e64c2e1a48693ecba2de00189f0af4af73772ad0035d257178198e1dbabab45c2f92903e985dc4af39afec68c511a909d48c10c9e30c2e5dd572978535be179d3d13be5b9426e7b0b3043ce932a3d763fc03fa60fa8d0d9f50be3712e1acc647e5af034a5c68d",
	"0xba02224983ed209c818fe19fabbb354dc8b6a84a02504182caf2badf410d85a90e741d07fdcbbc70c27c4be66ba2f7033d5c2c0c722ff97bf85fadb7f2f29e39520e49b15a3a4d06831a19fe21162dba659f045a6ad9e5a7b1a59298e792554508fbebf35c0a4fa79eb2127a03ab54a9c0be4ffdab4e9ac47eab6b87e83beca70ccdde8ba685bae14d55ef68a241ae76b59a039854633e8a47aa33ead7992a8c75dc98d0c743c168168711d3619da859084e28ad22cb5ea651fae3d8ec70a75f9e7c9dbb265e294a311a9d9dee93332a0879f9689753599701cba26e1105f15e81cd669d59a184fc6906be7e3d471652cfa035b6abae40dee1b1c9bbb4c42127",
}
*/

func testMontgomeryReduction(t *testing.T, f montRed, value gen_value) {
	one := NewInt(1)
	_B := new(Int).Lsh(one, _W)

	for i, p := range setOfPrimes {
		m := natFromString(p)
		n := len(m)

		// Generating a random input
		x := nat(nil).make(2 * n)
		for t, _ := range x {
			x[t] = value()
		}

		// Generating want
		T := &Int{abs: x}
		mi := &Int{abs: m}
		fmt.Printf("T: %s\n", T.Text(16))
		out := new(Int).Mod(new(Int).Mul(T, new(Int).ModInverse(new(Int).Lsh(one, uint(len(m))*_W), mi)), mi)
		want := out.abs.norm()

		// Generating k0
		k := new(Int).Mod(&Int{abs: m}, _B)
		k = new(Int).Sub(_B, k)
		k = new(Int).Mod(k, _B)
		k0 := Word(new(Int).ModInverse(k, _B).Uint64())

		// Generating got
		got := nat(nil).make(2 * n)
		copy(got, x)
		c := f(got, m, k0)
		got = got[n : 2*n]
		fmt.Printf("c: %v\n", c)
		if c != 0 {
			subVV(got, got, m)
		}
		got = got.norm()

		fmt.Printf("m: %s\n", m.utoa(16))
		fmt.Printf("got: %s \n", got.utoa(16))
		if got.cmp(want) != 0 {
			t.Errorf("#%d got %s want %s", i, got.utoa(16), want.utoa(16))
		}
	}
}

func TestMontgomeryReduction(t *testing.T) {
	r := rand.New(rand.NewSource(int64(time.Now().UnixNano())))
	values := []gen_value{
		//		func() Word { return 0 },
		//		func() Word { return 1 },
		//		func() Word { return (1 << _W) - 1 },
		//		func() Word { return Word(r.Uint64()) },
	}

	for _, value := range values {
		testMontgomeryReduction(t, montReduction_mulq, value)
		if cpu.X86.HasBMI2 {
			//	testMontgomeryReduction(t, montReduction_mulx, value)
		}
		//	if cpu.X86.HasADX {
		//		testIntMult_allones(t, intmult_mulx, sizes)
		//	}
	}
}
